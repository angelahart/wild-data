data <- read.csv("remaining uninsured_base.csv", stringsAsFactors=F)
setwd("~/dataviz-fall-2013/wild-data")
data <- read.delim("county-data.txt", header = FALSE)
names(data) <- c("county_original", "guncount_original")
split <- strsplit(data$county_orig, "\\(")
split <- strsplit(data$county_orig, \\(")
split <- strsplit(data$county_orig, "\\(")
head(data)
class(data$county_original)
data$county_original <- as.character(data$county_original)
data$guncount_original <- as.numeric(data$guncount_original)
class(data$county_original)
class(data$guncount_original)
split <- strsplit(data$county_orig, "\\(")
get_first_item <- function(item){
return(item[1])
}
get_second_item <- function(item){
return(item[2])
}
data$county <- sapply(split, get_first_item)
data$state <- sapply(split, get_second_item)
data$state <- gsub(")", "", data$state)
data$guncount_nocommas <- gsub(",", "", data$guncount_orig)
data$guncount_clean <- as.numeric(data$guncount_nocommas)
state_totals_data <- aggregate(data$guncount_clean, by = list(data$state), sum)
names(state_totals_data) <- c("state", "guncount")
shapes <- readShapePoly("nytlayout_state.shp")
shapes <- readShapePoly("nytlayout_state.shp")
shapes <- readShapePoly("nyt_county.shp")
shapes <- readShapePoly("nyt_county.shp")
install.packages("maptools:)
install.packages("maptools")
install.packages("maptools")
library(maptools)
shapes <- readShapePoly("nyt_county.shp")
shapes <- readShapePoly("nytlayout_state.shp")
data$county <- sapply(split, get_first_item)
data$state <- sapply(split, get_second_item)
data$state <- gsub(")", "", data$state)
data$guncount_nocommas <- gsub(",", "", data$guncount_orig)
data$guncount_clean <- as.numeric(data$guncount_nocommas)
state_totals_data <- aggregate(data$guncount_clean, by = list(data$state), sum)
names(state_totals_data) <- c("state", "guncount")
shapes <- readShapePoly("nytlayout_state.shp")
shapes <- readShapePoly("wild-data/nyt_county.shp")
shapes <- readShapePoly("nyt_county/nyt_county.shp")
plot(shapes)
map_data <- data.frame(shapes)
head(map_data)
map_data$state <- as.character(map_data$STATE_ABBR)
map_data$state <- as.character(map_data$STATE_ABBR)
state_totals_data$state%in%map_data$state
match(map_data$state, state_totals_data$state)
data_order <-match(map_data$state, state_totals_data$state)
map_data$guncount <- state_totals_data$guncount[data_order]
map_data$state <- as.character(map_data$STATE_ABBR)
map_data$state <- as.numeric(map_data$STATE_ABBR)
map_data$state <- as.character(map_data$STATE_ABBR)
map_data$state <- as.character(0))(map_data$STATE_ABBR)
map_data$state <- as.character(map_data$STATE_ABBR)
map_data <- data.frame(shapes)
head(map_data)
map_data$state <- as.character(map_data$STATE_ABBR)
head(mapdata)
shapes <- readShapePoly("nytlayout_state/nyt_county.shp")
shapes <- readShapePoly("nytlayout_state/nyt_county.shp")
shapes <- readShapePoly("nytlayout_state.shp")
shapes <- readShapePoly("nytlayout_state/nyt_county.shp")
plot(shapes)
map_data <- data.frame(shapes)
head(map_data)
map_data$state <- as.character(map_data$STATE_ABBR)
shapes <- readShapePoly("nytlayout_state/nyt_state.shp")
shapes <- readShapePoly("nytlayout_state/nytlayout_state.shp")
plot(shapes)
map_data <- data.frame(shapes)
head(map_data)
map_data$state <- as.character(map_data$STATE_ABBR)
head(map_data)
class(map_data$state[1])
state_totals_data$state%in%map_data$state
match(map_data$state, state_totals_data$state)
data_order <-match(map_data$state, state_totals_data$state)
map_data$guncount <- state_totals_data$guncount[data_order]
breaks <- c(0,50,100,200,300,500,1000,5000,10000,25000)
buckets <- cut(map_data$guncount, breaks=breaks)
numeric_buckets <- as.numeric(buckets)
colors[numeric_buckets]
plot(shapes, col = colors[numeric_buckets])
install.packages(colorbrewer)
install.packages("colorbrewer")
?colorbrewer
?colors
?packages
install.packages("RColorBrewer")
plot(shapes, col = colors[numeric_buckets])
colors[numeric_buckets]
buckets <- cut(map_data$guncount, breaks=breaks)
shapes <- readShapePoly("nytlayout_state/nytlayout_state.shp")
plot(shapes)
map_data <- data.frame(shapes)
head(map_data)
map_data$state <- as.character(map_data$STATE_ABBR)
head(map_data)
class(map_data$state[1])
state_totals_data$state%in%map_data$state
match(map_data$state, state_totals_data$state)
data_order <-match(map_data$state, state_totals_data$state)
map_data$guncount <- state_totals_data$guncount[data_order]
breaks <- c(0,50,100,200,300,500,1000,5000,10000,25000)
buckets <- cut(map_data$guncount, breaks=breaks)
numeric_buckets <- as.numeric(buckets)
colors[numeric_buckets]
plot(shapes, col = colors[numeric_buckets])
numeric_buckets <- as.numeric(buckets)
shapes <- readShapePoly("nytlayout_state/nytlayout_state.shp")
plot(shapes)
map_data <- data.frame(shapes)
head(map_data)
map_data$state <- as.character(map_data$STATE_ABBR)
head(map_data)
class(map_data$state[1])
state_totals_data$state%in%map_data$state
match(map_data$state, state_totals_data$state)
data_order <-match(map_data$state, state_totals_data$state)
map_data$guncount <- state_totals_data$guncount[data_order]
breaks <- c(0,50,100,200,300,500,1000,5000,10000,25000)
buckets <- cut(map_data$guncount, breaks=breaks)
numeric_buckets <- as.numeric(buckets)
numeric_buckets <- as.numeric(buckets)
library("RColorBrewer")
colors[numeric_buckets]
col<-brewer.pal(n=7,name="Set3")[-1]
colors[numeric_buckets]
plot(shapes, col = colors[numeric_buckets])
numeric_buckets <- as.numeric(buckets)
colors <- brewer.pal(9, "YlOrRd")
plot(shapes, col=colors[numeric_buckets])
map_breaks <- c(0, 50, 100, 250, 500, 750, 1000, 2500, 5000, 25000)
buckets <- cut(map_data$guns, breaks=map_breaks)
numeric_buckets <- as.numeric(buckets)
colors <- brewer.pal(9, "YlOrRd")
plot(shapes, col=colors[numeric_buckets])
